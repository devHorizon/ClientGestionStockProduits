<h3>Produits</h3>
<div class="row container">
  <div class="col-lg-7">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Réfrence</th><th>Quantité</th><th>Prix Unitaire</th>
          <th>
            <button class="btn btn-sm btn-outline-primary" (click)="crudOperation = 'add'; initProduit();">
              Add
            </button>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let produit of produits">
          <td>{{produit.ref}}</td><td>{{produit.quantite}}</td><td>{{produit.prixUnitaire}}</td>
          <td>
            <button class="btn btn-sm btn-outline-primary"
              (click)="crudOperation = 'edit'; selectedProduit = produit;">
              Edit
            </button>
            <button class="btn btn-sm btn-outline-danger"
              (click)="crudOperation = 'remove'; selectedProduit = produit;">
              Remove
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-lg-5">
    <div class="card">
      <div class="card-header bg-info text-white">
        {{crudOperation == 'add' ? 'Ajouter Produit':
            crudOperation == 'edit' ?
              'Modifier Produit' :
                  crudOperation == 'remove' ? 'Supprimer Produit': ''}}
      </div>
      <div class="card-body">
        <div *ngIf="crudOperation == 'add' || crudOperation == 'edit'">
          <form [formGroup]="produitForm">
            <div class="form-group">
              <label>Réference</label>
              <input type="text" class="form-control" formControlName="ref" [(ngModel)]="selectedProduit.ref" />
            </div>
            <div class="alert alert-danger" *ngIf="produitForm.controls['ref'].invalid &&
                    (produitForm.controls['ref'].touched || produitForm.controls['ref'].dirty) ">
              Ref is required
            </div>
            <div class="form-group">
              <label>Quantité</label>
              <input type="number" class="form-control" formControlName="quantite" [(ngModel)]="selectedProduit.quantite"/>
            </div>
            <div class="form-group">
              <label>Prix Unitaire</label>
              <input type="number" class="form-control" formControlName="prixUnitaire" [(ngModel)]="selectedProduit.prixUnitaire"/>
            </div>
            <button class="btn btn-success" [disabled]="produitForm.prestine || produitForm.invalid"
              (click)="crudOperation == 'add' ? addProduit() : updateProduit()">
              {{crudOperation == 'add' ? 'Ajouter' : 'Modifier'}}
            </button>
          </form>
        </div>
        <div *ngIf="crudOperation == 'remove'">
          <p class="card-title">
            Réference: {{selectedProduit.ref}}
          </p>
          <p class="card-text">
            Voulez-vous vraiment supprimer ce produit?
          </p>
          <button class="btn btn-success" [disabled]="!selectedProduit.ref" (click)="deleteProduit()">
            Confirmer
          </button>
        </div>
      </div>
      <div class="card-footer bg-info">

      </div>
    </div>
  </div>
</div>
